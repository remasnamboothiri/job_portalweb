<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Typewriter Sync Test</title>\n    <style>\n        body {\n            font-family: Arial, sans-serif;\n            max-width: 800px;\n            margin: 0 auto;\n            padding: 20px;\n            background: #f5f5f5;\n        }\n        .test-container {\n            background: white;\n            padding: 20px;\n            border-radius: 8px;\n            margin: 20px 0;\n            box-shadow: 0 2px 4px rgba(0,0,0,0.1);\n        }\n        .subtitle-display {\n            background: #333;\n            color: white;\n            padding: 20px;\n            border-radius: 8px;\n            font-size: 18px;\n            line-height: 1.4;\n            min-height: 60px;\n            margin: 10px 0;\n        }\n        button {\n            background: #007bff;\n            color: white;\n            border: none;\n            padding: 10px 20px;\n            border-radius: 4px;\n            cursor: pointer;\n            margin: 5px;\n        }\n        button:hover {\n            background: #0056b3;\n        }\n        .controls {\n            margin: 20px 0;\n        }\n        .status {\n            padding: 10px;\n            margin: 10px 0;\n            border-radius: 4px;\n            background: #e9ecef;\n        }\n    </style>\n</head>\n<body>\n    <h1>Typewriter Synchronization Test</h1>\n    \n    <div class=\"test-container\">\n        <h3>Test 1: Natural Typewriter (No Audio)</h3>\n        <div class=\"subtitle-display\" id=\"test1\"></div>\n        <div class=\"controls\">\n            <button onclick=\"testNaturalTypewriter()\">Start Natural Typewriter</button>\n            <button onclick=\"clearTest1()\">Clear</button>\n        </div>\n        <div class=\"status\" id=\"status1\">Ready</div>\n    </div>\n    \n    <div class=\"test-container\">\n        <h3>Test 2: Audio Synchronized Typewriter</h3>\n        <div class=\"subtitle-display\" id=\"test2\"></div>\n        <div class=\"controls\">\n            <button onclick=\"testSyncTypewriter()\">Start Sync Typewriter</button>\n            <button onclick=\"clearTest2()\">Clear</button>\n            <audio id=\"testAudio\" controls style=\"width: 100%; margin: 10px 0;\">\n                <source src=\"/media/tts/gtts_test.mp3\" type=\"audio/mpeg\">\n                Your browser does not support the audio element.\n            </audio>\n        </div>\n        <div class=\"status\" id=\"status2\">Ready</div>\n    </div>\n    \n    <div class=\"test-container\">\n        <h3>Test 3: Duration Estimation</h3>\n        <textarea id=\"testText\" rows=\"4\" cols=\"50\" placeholder=\"Enter text to estimate duration...\">Hello! Welcome to your AI interview. I'm excited to learn more about you and your experience. Can you tell me about yourself and why you're interested in this position?</textarea><br>\n        <button onclick=\"testDurationEstimation()\">Estimate Duration</button>\n        <div class=\"status\" id=\"status3\">Ready</div>\n    </div>\n    \n    <!-- Load the typewriter sync system -->\n    <script src=\"/static/js/typewriter-sync.js\"></script>\n    \n    <script>\n        const testTexts = {\n            short: \"Hello! Welcome to your interview.\",\n            medium: \"Hello! Welcome to your AI interview. I'm excited to learn more about you and your experience. Can you tell me about yourself?\",\n            long: \"Hello! Welcome to your AI interview. I'm excited to learn more about you and your experience. Can you tell me about yourself and why you're interested in this position? What drew you to apply for this role, and what specific skills do you think make you a good fit?\"\n        };\n        \n        function testNaturalTypewriter() {\n            const element = document.getElementById('test1');\n            const status = document.getElementById('status1');\n            const text = testTexts.medium;\n            \n            status.textContent = 'Starting natural typewriter...';\n            \n            if (window.TypewriterSync) {\n                const startTime = Date.now();\n                window.TypewriterSync.createNatural(element, text, null)\n                    .then(() => {\n                        const duration = (Date.now() - startTime) / 1000;\n                        status.textContent = `Completed in ${duration.toFixed(1)} seconds`;\n                    });\n            } else {\n                status.textContent = 'TypewriterSync not loaded!';\n            }\n        }\n        \n        function testSyncTypewriter() {\n            const element = document.getElementById('test2');\n            const status = document.getElementById('status2');\n            const audio = document.getElementById('testAudio');\n            const text = testTexts.medium;\n            \n            status.textContent = 'Starting synchronized typewriter...';\n            \n            if (window.TypewriterSync) {\n                // Reset audio\n                audio.currentTime = 0;\n                \n                const startTime = Date.now();\n                \n                // Start audio and typewriter together\n                audio.play().then(() => {\n                    window.TypewriterSync.createSynchronized(element, text, audio)\n                        .then(() => {\n                            const duration = (Date.now() - startTime) / 1000;\n                            status.textContent = `Completed in ${duration.toFixed(1)} seconds`;\n                        });\n                }).catch(error => {\n                    console.error('Audio play failed:', error);\n                    status.textContent = 'Audio play failed, using natural typewriter';\n                    window.TypewriterSync.createNatural(element, text, null)\n                        .then(() => {\n                            const duration = (Date.now() - startTime) / 1000;\n                            status.textContent = `Completed (no audio) in ${duration.toFixed(1)} seconds`;\n                        });\n                });\n            } else {\n                status.textContent = 'TypewriterSync not loaded!';\n            }\n        }\n        \n        function testDurationEstimation() {\n            const text = document.getElementById('testText').value;\n            const status = document.getElementById('status3');\n            \n            if (window.TypewriterSync && text.trim()) {\n                const estimated = window.TypewriterSync.estimateDuration(text);\n                const wordCount = text.split(/\\s+/).length;\n                status.innerHTML = `\n                    <strong>Text Analysis:</strong><br>\n                    Words: ${wordCount}<br>\n                    Estimated Duration: ${estimated.toFixed(1)} seconds<br>\n                    Estimated WPM: ${(wordCount / (estimated / 60)).toFixed(0)}\n                `;\n            } else {\n                status.textContent = 'Please enter some text or TypewriterSync not loaded!';\n            }\n        }\n        \n        function clearTest1() {\n            document.getElementById('test1').textContent = '';\n            document.getElementById('status1').textContent = 'Ready';\n        }\n        \n        function clearTest2() {\n            document.getElementById('test2').textContent = '';\n            document.getElementById('status2').textContent = 'Ready';\n            document.getElementById('testAudio').pause();\n            document.getElementById('testAudio').currentTime = 0;\n        }\n        \n        // Test system on load\n        window.addEventListener('load', () => {\n            setTimeout(() => {\n                if (window.TypewriterSync) {\n                    console.log('✅ TypewriterSync system loaded successfully');\n                    console.log('Available methods:', Object.keys(window.TypewriterSync));\n                } else {\n                    console.error('❌ TypewriterSync system not loaded');\n                }\n            }, 100);\n        });\n    </script>\n</body>\n</html>